# Visual Studio C++ 调试环境配置指南

## 项目配置说明

您的项目已经配置了完整的调试环境，包括以下特性：

### 1. 调试配置特性
- **调试信息格式**: ProgramDatabase (PDB文件)
- **优化级别**: 禁用优化 (便于调试)
- **运行时库**: 多线程调试DLL
- **运行时检查**: 启用快速检查
- **缓冲区安全检查**: 启用
- **异常处理**: 同步异常处理

### 2. 编译选项
- **警告级别**: Level3 (最高级别警告)
- **SDL检查**: 启用
- **一致性模式**: 启用
- **预处理器定义**: 包含 `_CRT_SECURE_NO_WARNINGS` 以消除安全警告

### 3. 链接选项
- **子系统**: 控制台应用程序
- **调试信息**: 生成完整调试信息
- **UAC**: 禁用用户账户控制
- **增量链接**: 启用

## 调试使用指南

### 1. 设置断点
- 在代码行号左侧点击设置断点
- 或使用快捷键 `F9`
- 断点会显示为红色圆点

### 2. 启动调试
- 按 `F5` 启动调试
- 或点击工具栏的"开始调试"按钮
- 程序会在第一个断点处停止

### 3. 调试控制
- **F5**: 继续执行到下一个断点
- **F10**: 逐过程执行 (Step Over)
- **F11**: 逐语句执行 (Step Into)
- **Shift+F11**: 跳出当前函数 (Step Out)
- **Ctrl+Shift+F5**: 重新启动调试

### 4. 调试窗口
- **局部变量窗口**: 查看当前函数中的变量值
- **监视窗口**: 添加要监视的变量或表达式
- **调用堆栈**: 查看函数调用链
- **输出窗口**: 查看程序输出和调试信息

### 5. 条件断点
- 右键点击断点 → 选择"条件"
- 设置条件表达式，只有满足条件时才停止

### 6. 数据断点
- 调试 → 新建断点 → 数据断点
- 当指定内存地址的值改变时停止

## 调试技巧

### 1. 变量监视
```cpp
// 在监视窗口中添加表达式
guild.getMemberCount()  // 监视公会成员数量
choice                  // 监视用户选择
```

### 2. 输出调试信息
```cpp
// 在代码中添加调试输出
#ifdef _DEBUG
    std::cout << "调试信息: choice = " << choice << std::endl;
#endif
```

### 3. 断言
```cpp
#include <cassert>
assert(choice >= 1 && choice <= 8);  // 检查选择范围
```

### 4. 内存泄漏检测
项目已配置为使用调试运行时库，会自动检测内存泄漏。

## 常见问题解决

### 1. 程序无法启动调试
- 确保选择了Debug配置
- 检查是否生成了.exe文件
- 确认工作目录设置正确

### 2. 断点不生效
- 确保代码已重新编译
- 检查断点是否设置在有效代码行
- 确认没有优化影响

### 3. 变量值显示不正确
- 检查变量作用域
- 确认变量没有被优化掉
- 使用监视窗口而不是局部变量窗口

### 4. 调试信息不完整
- 确保生成了PDB文件
- 检查调试信息格式设置
- 确认没有剥离符号信息

## 项目特定调试建议

### 1. 公会管理功能调试
- 在 `addPlayer()` 函数中设置断点，检查玩家添加逻辑
- 在 `removePlayer()` 函数中设置断点，检查删除逻辑
- 在 `listPlayers()` 函数中设置断点，检查显示逻辑

### 2. 菜单系统调试
- 在 `handleChoice()` 函数中设置断点，检查用户输入处理
- 在 `showMainMenu()` 函数中设置断点，检查菜单显示

### 3. 输入验证调试
- 在 `main()` 函数的输入处理部分设置断点
- 检查用户输入的有效性

## 性能调试

### 1. 性能分析器
- 调试 → 性能分析器
- 选择CPU使用率分析
- 识别性能瓶颈

### 2. 内存分析
- 调试 → 性能分析器 → 内存使用率
- 检测内存泄漏和过度分配

## 远程调试

如果需要远程调试，可以配置远程调试器：
1. 在目标机器上安装远程调试工具
2. 配置防火墙允许调试端口
3. 在Visual Studio中配置远程连接

---

**注意**: 这个配置适用于开发阶段。发布版本应该使用Release配置以获得最佳性能。 